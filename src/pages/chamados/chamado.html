<ion-header>
  <ion-navbar>
    <ion-buttons end>
      <button 
        ion-button icon-only 
        (click)="telaEquipamentosHistorico(chamado)">
        <ion-icon name="clipboard"></ion-icon>
      </button>
    </ion-buttons>

    <ion-title>{{ chamado?.codOs }}</ion-title>
  </ion-navbar>
  <ion-toolbar>
    <ion-title>{{ tituloSlide }}</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="chamado-content-page outer-content">
  <ion-slides pager (ionSlideDidChange)="alterarSlide()">
    <!-- Informações -->
    <ion-slide>
      <ion-list>
        <ion-item
          class="first-item">
          Data Abertura
          <ion-note item-end>
            {{ chamado?.dataHoraAberturaOS | date: 'dd/MM HH:mm' }}
          </ion-note>
        </ion-item>

        <ion-item>
          OS Cliente
          <ion-note item-end>
            {{ chamado?.numOsCliente || 'Não Informado' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Cliente
          <ion-note item-end>
            {{ chamado?.cliente?.numBanco }}
            - {{ chamado?.cliente?.nomeCliente }}
          </ion-note>
        </ion-item>

        <ion-item>
          Num. Agência
          <ion-note item-end>
              {{ chamado?.localAtendimento?.numAgencia || '--' }} / {{ chamado?.localAtendimento?.dcPosto || '--' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Nome Agência
          <ion-note item-end>
            {{ chamado?.localAtendimento?.nomeLocalAtendimento 
              || 'Não Informado' | ellipsis: 28 }}
          </ion-note>
        </ion-item>

        <ion-item>
          Solicitante
          <ion-note item-end>
            {{ chamado?.nomeSolicitante || 'Não Informado'  | ellipsis: 28 }}
          </ion-note>
        </ion-item>

        <ion-item>
          Modelo
          <ion-note item-end>
            {{ chamado?.equipamentoContrato?.equipamento?.codEEquip
              || 'Não Informado' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Código Pai
          <ion-note item-end>
            {{ chamado?.equipamentoContrato?.contrato?.codPai
              || 'Não Informado' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Num Série
          <ion-note item-end>
            {{ chamado?.equipamentoContrato?.numSerie
              || 'Não Informado' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Nº do ATM
          <ion-note item-end>
            {{ chamado?.equipamentoContrato?.numSerieCliente
              || 'Não Informado' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Nro. Contrato
          <ion-note item-end>
            {{ chamado?.equipamentoContrato?.contrato?.nroContrato
              || 'Não Informado' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Nome Contrato
          <ion-note item-end>
            {{ chamado?.equipamentoContrato?.contrato?.nomeContrato
              || 'Não Informado' }}
          </ion-note>
        </ion-item>

        <ion-item 
          *ngIf="chamado?.dataHoraSolicitacaoOS 
            && chamado?.dataHoraAberturaOS 
            != chamado?.dataHoraSolicitacaoOS">
          Data Solicitação
          <ion-note item-end>
            {{ chamado?.dataHoraSolicitacaoOS 
              | date: 'dd/MM HH:mm' }}
          </ion-note>
        </ion-item>

        <ion-item 
          *ngIf="chamado?.dataFimSLA">
          Fim SLA
          <ion-note item-end>
            {{ chamado?.dataFimSLA 
              | date: 'dd/MM HH:mm' }}
          </ion-note>
        </ion-item>

        <ion-item 
          *ngIf="chamado?.dataHoraAgendamento">
          Agendado
          <ion-note item-end>
            {{ chamado?.dataHoraAgendamento 
              | date: 'dd/MM HH:mm' }}
          </ion-note>
        </ion-item>

        <ion-item>
          Status
          <ion-note item-end>
            {{ chamado?.statusServico?.nomeStatusServico 
              || 'Não Informado' | lowercase | capitalize }}
          </ion-note>
        </ion-item>

        <ion-item>
          Intervenção
          <ion-note item-end>
            {{ chamado?.tipoIntervencao?.nomeTipoIntervencao
              || 'Não Informado' | lowercase | capitalize }}
          </ion-note>
        </ion-item>

        <ion-item>
          Reincidências
          <ion-note item-end>
            {{ chamado?.numReincidencias || 'Nenhuma' }}
          </ion-note>
        </ion-item>

        <ion-item-divider 
          text-left 
          color="light">
          Defeito
        </ion-item-divider>

        <ion-item text-wrap>
          <span class="text-wrap-content">
            {{ chamado?.defeitoRelatado || 'Não Informado' 
              | lowercase | capitalize }}</span>
        </ion-item>

        <ion-item-divider 
          text-left 
          color="light">
          Observação
        </ion-item-divider>

        <ion-item 
          text-wrap>
          <span class="text-wrap-content">
            {{ chamado?.observacao || 'Não Informado' 
              | lowercase | capitalize }}</span>
        </ion-item>

        <ion-item-divider 
          text-left 
          color="light">
          Marcação Especial
        </ion-item-divider>

        <ion-item 
          text-wrap>
          <span class="text-wrap-content">
            {{ chamado?.descMotivoMarcaEspecial || 'Não Informado' 
              | lowercase | capitalize }}</span>
        </ion-item>
      </ion-list>

      <p class="slide-msg">Deslize a tela para prosseguir</p>
    </ion-slide>
    <!-- Informações -->

    <!-- Checkin -->
    <ion-slide>
      <ion-list>
        <ion-card text-left
          class="card-chamado-bloqueado"
          *ngIf="chamado?.indBloqueioReincidencia">
          <ion-card-header color="danger">
            <ion-icon
              *ngIf="chamado.indBloqueioReincidencia"
              name="lock" 
              class="title-icon"
              color="danger"
              item-start>
            </ion-icon>
            Chamado Bloqueado!
          </ion-card-header>
          <ion-card-content>
            Favor realizar contato com sua <b ion-text>Filial</b> ou 
            <b ion-text>Suporte Técnico</b> para garantir as ações necessárias 
            e liberação do chamado.
          </ion-card-content>
        </ion-card>

        <div padding *ngIf="!chamado?.checkin?.localizacao?.latitude  && !chamado?.checkin?.localizacao?.longitude">
          <button color="secondary" (click)="efetuarCheckin()" ion-button outline icon-start class="btn-checkin">
            <ion-icon name='ios-locate-outline' is-active="false"></ion-icon>

            {{ (!chamado?.checkin?.localizacao?.latitude && !chamado?.checkin?.localizacao?.longitude) ? 'Checkin' : 'Checkin Efetuado' }}
          </button>

          <p *ngIf="chamado?.indCercaEletronicaLiberada">
            O checkin pode ser efetuado fora do local de atendimento para esta OS
          </p>
        </div>
      </ion-list>

      <ion-card class="adv-map" *ngIf="chamado?.checkin?.localizacao?.latitude && chamado?.checkin?.localizacao?.longitude">
        <ion-item>
          <ion-icon color="subtle" class="adv-map-icon" name="pin" item-start large></ion-icon>

          <div class="adv-map-titles">
            <h2>Checkin Efetuado</h2>
            <p>{{ chamado?.checkin?.dataHoraCadastro }}</p>
          </div>
        </ion-item>
      </ion-card>
    </ion-slide>
    <!-- Checkin -->

    <!-- Imagens da RAT -->
    <ion-slide>
      <ion-item-group>
        <ion-item-divider color="light" class="first-item">5.1 RAT Física</ion-item-divider>

        <ion-item>
          <ion-avatar item-start>
            <img src="{{ carregarFoto('RAT') }}">
          </ion-avatar>
          <h2>Capturar RAT Física</h2>
          <button ion-button clear item-end 
            (click)="tirarFoto('RAT')"
            *ngIf="!verificarExistenciaFoto('RAT')"
            [disabled]="chamado?.indRatEletronica">
            <ion-icon ios="ios-camera" md="md-camera"></ion-icon>
          </button>

          <button ion-button clear item-end 
            (click)="removerFoto('RAT')"
            *ngIf="verificarExistenciaFoto('RAT')">
            <ion-icon name="trash" color="danger"></ion-icon>
          </button>
        </ion-item>

        <ion-item-divider color="light">5.2 Fotos do Equipamento</ion-item-divider>

        <ion-item>
          <ion-avatar item-start>
            <img src="{{ carregarFoto('ETIQUETANUMSERIE') }}">
          </ion-avatar>
          <h2>Etiqueta Número de Série</h2>
          <button ion-button clear item-end 
            (click)="tirarFoto('ETIQUETANUMSERIE')" 
            *ngIf="!verificarExistenciaFoto('ETIQUETANUMSERIE')">
            <ion-icon ios="ios-camera" md="md-camera"></ion-icon>
          </button>

          <button ion-button clear item-end 
            (click)="removerFoto('ETIQUETANUMSERIE')"
            *ngIf="verificarExistenciaFoto('ETIQUETANUMSERIE')">
            <ion-icon name="trash" color="danger"></ion-icon>
          </button>
        </ion-item>

        <ion-item>
          <ion-avatar item-start>
            <img src="{{ carregarFoto('EQUIPAMENTOOPERACIONAL') }}">
          </ion-avatar>
          <h2>Equipamento Operacional</h2>
          <button ion-button clear item-end 
            (click)="tirarFoto('EQUIPAMENTOOPERACIONAL')" 
            *ngIf="!verificarExistenciaFoto('EQUIPAMENTOOPERACIONAL')">
            <ion-icon ios="ios-camera" md="md-camera"></ion-icon>
          </button>

          <button ion-button clear item-end 
            (click)="removerFoto('EQUIPAMENTOOPERACIONAL')"
            *ngIf="verificarExistenciaFoto('EQUIPAMENTOOPERACIONAL')">
            <ion-icon name="trash" color="danger" class="trash-icon"></ion-icon>
          </button>
        </ion-item>

        <ion-item>
          <ion-avatar item-start>
            <img src="{{ carregarFoto('PARTEINTERNA') }}">
          </ion-avatar>
          <h2>Parte Interna</h2>
          <button ion-button clear item-end 
            (click)="tirarFoto('PARTEINTERNA')"
            *ngIf="!verificarExistenciaFoto('PARTEINTERNA')">
            <ion-icon ios="ios-camera" md="md-camera"></ion-icon>
          </button>

          <button ion-button clear item-end 
            (click)="removerFoto('PARTEINTERNA')"
            *ngIf="verificarExistenciaFoto('PARTEINTERNA')">
            <ion-icon name="trash" color="danger" class="trash-icon"></ion-icon>
          </button>
        </ion-item>

        <ion-item-divider color="light">5.3 Laudo Técnico</ion-item-divider>

        <ion-item>
          <ion-avatar item-start>
            <img src="assets/imgs/attachment.png">
          </ion-avatar>
          <h2>Laudo</h2>
       
          <button ion-button clear item-end (click)="telaLaudo(chamado)"
            *ngIf="!verificarExistenciaLaudo()">
            <ion-icon name="add-circle" color="primary"></ion-icon>
          </button>

          <button ion-button clear item-end (click)="removerLaudo()"
            *ngIf="verificarExistenciaLaudo()">
            <ion-icon name="trash" color="danger" class="trash-icon"></ion-icon>
          </button>
        </ion-item>
      </ion-item-group>
    </ion-slide>
    <!-- Fotos da RAT -->

    <!-- Informações da RAT -->
    <ion-slide>
      <form #f="ngForm" (ngSubmit)="salvarRat(f)" class="form">
        <ion-list>
          <ion-item col-6 class="pos-left">
            <ion-label stacked>RAT</ion-label>
            <ion-input
              type="number"
              name="numRat" 
              [placeholder]="chamado?.indRatEletronica ? 'Nro Automático' : 'Número'" 
              [disabled]="chamado?.indRatEletronica"
              [ngModel]="chamado?.rats[0]?.numRat" 
              [required]="!chamado?.indRatEletronica">
            </ion-input>
          </ion-item>

          <ion-item col-6>
            <ion-label stacked>Acompanhante</ion-label>
            <ion-input 
              type="text" 
              placeholder="Nome" 
              name="nomeAcompanhante"
              [maxlength]="50"
              [ngModel]="chamado?.rats[0]?.nomeAcompanhante">
            </ion-input>
          </ion-item>

          <ion-row class="bg-silver-light">
            <ion-col 
              col-12
              text-left
              class="no-padding padding-left">
              <ion-label
                stacked
                class="label-title"
                left-align
                style="margin-bottom: 0px;">Marcações de Ponto</ion-label>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col class="no-padding">
              <ion-item class="bg-silver-light">
                <ion-label 
                  stacked
                  class="label-title">Chegada</ion-label>
                <ion-label class="label-content">
                  {{ (usuarioPonto?.registros[0] | date:'HH:mm') || '--:--' }}
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col class="no-padding">
              <ion-item class="bg-silver-light">
                <ion-label 
                  stacked
                  class="label-title">Início</ion-label>
                <ion-label class="label-content">
                  {{ (usuarioPonto?.registros[1] | date:'HH:mm') || '--:--' }}
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col class="no-padding">
              <ion-item class="bg-silver-light">
                <ion-label 
                  stacked 
                  class="label-title">Fim</ion-label>
                <ion-label class="label-content">
                  {{ (usuarioPonto?.registros[2] | date:'HH:mm') || '--:--' }}
                </ion-label>
              </ion-item>
            </ion-col>
            
            <ion-col class="no-padding">
              <ion-item class="bg-silver-light">
                <ion-label stacked class="label-title">Saída</ion-label>
                <ion-label class="label-content">
                  {{ (usuarioPonto?.registros[3] | date:'HH:mm') || '--:--' }}
                </ion-label>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col 
              col-12
              text-left
              class="no-padding padding-left">
              <ion-label
                stacked
                class="label-title"
                left-align>Horários do Atendimento
              </ion-label>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col class="no-padding">
              <ion-item>
                <ion-label stacked>Data</ion-label>
                <ion-datetime 
                  displayFormat="DD/MM"
                  pickerFormat="DD MMM"
                  placeholder="01 Jan 2017"
                  name="dataInicio"
                  cancelText="Cancelar"
                  doneText="Selecionar"
                  [ngModel]="chamado?.rats[0]?.dataInicio || dataAtual"
                  required></ion-datetime>
              </ion-item>
            </ion-col>
            <ion-col class="no-padding">
              <ion-item>
                <ion-label stacked>Hora Início</ion-label>
                <ion-datetime 
                  displayFormat="HH:mm"
                  pickerFormat="HH:mm"
                  placeholder="08:00" 
                  name="horaInicio"
                  cancelText="Cancelar"
                  doneText="Selecionar"
                  [initialValue]="horaAtual"
                  [ngModel]="chamado?.rats[0]?.horaInicio"
                  required>
                </ion-datetime>
              </ion-item>
            </ion-col>
            <ion-col class="no-padding">
              <ion-item>
                <ion-label stacked>Hora Solução</ion-label>
                <ion-datetime 
                  displayFormat="HH:mm"
                  pickerFormat="HH:mm"
                  placeholder="09:00"
                  name="horaSolucao" 
                  cancelText="Cancelar"
                  doneText="Selecionar"
                  [initialValue]="horaAtual"
                  [ngModel]="chamado?.rats[0]?.horaSolucao"
                  required>
                </ion-datetime>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-item>
            <ion-label stacked>Solução</ion-label>
            <ion-textarea 
              placeholder="Descreva o serviço realizado" 
              name="obsRAT"
              [maxlength]="1000"
              [ngModel]="chamado?.rats[0]?.obsRAT"
              required>
            </ion-textarea>
          </ion-item>

          <div padding>
            <button
              color="secondary"
              ion-button 
              block
              [disabled]="!f.valid">
              Salvar e Prosseguir
            </button>
          </div>
        </ion-list>
      </form>
    </ion-slide>
    <!-- Informações da RAT -->

    <!-- Informações POS -->
    <ion-slide>
      <div class="campos-pos" *ngIf="verificarSeEquipamentoEPOS()">
        <form #fPos="ngForm" (ngSubmit)="salvarInformacoesPOS(fPos)" class="form">
          <ion-list>
            <ion-item col-12 class="no-border-bottom">
              <ion-label stacked>Status do Serviço</ion-label>

              <ion-select 
                placeholder="Selecione o Status do Serviço" 
                name="statusServico"
                [ngModel]="chamado?.rats[0]?.statusServico"
                [compareWith]="compararStatusServicos"
                (ionChange)="salvarStatusServico($event)"
                required>
                <ion-option 
                  *ngFor="let statusServico of statusServicos"
                  [value]="statusServico">
                  {{ statusServico?.nomeStatusServico }}
                </ion-option>
              </ion-select>
            </ion-item>

            <ion-item col-12 *ngIf="chamado?.rats[0]?.statusServico?.codStatusServico == 2 
              || chamado?.rats[0]?.statusServico?.codStatusServico == 16">
              <ion-label stacked>Motivo Cancelamento</ion-label>

              <ion-select 
                placeholder="Selecione o Motivo do Cancelamento" 
                name="motivoCancelamento"
                [ngModel]="chamado?.rats[0]?.motivoCancelamento"
                [compareWith]="compararMotivosCancelamento"
                required>
                <ion-option 
                  *ngFor="let motivoCancelamento of motivosCancelamento"
                  [value]="motivoCancelamento">
                  {{ motivoCancelamento?.nomeMotivoCancelamento }}
                </ion-option>
              </ion-select>
            </ion-item>

            <ion-item col-12 *ngIf="chamado?.rats[0]?.statusServico?.codStatusServico == 2 
              || chamado?.rats[0]?.statusServico?.codStatusServico == 16">
              <ion-label stacked>Obs. Motivo Cancelamento</ion-label>

              <ion-input
                type="text"
                name="obsMotivoCancelamento" 
                placeholder="Obs. Motivo Cancelamento"
                [ngModel]="chamado?.rats[0]?.obsMotivoCancelamento"
                required>
              </ion-input>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Equipamento Retirado</ion-label>
              
              <ion-select 
                placeholder="Selecione o Equipamento Retirado" 
                name="equipamentoRetirado" 
                [ngModel]="chamado?.rats[0]?.equipamentoRetirado"
                [compareWith]="compararEquipamentosPOS"
                [required]="chamado?.tipoIntervencao?.codTipoIntervencao == 3 
                || verificarDefeitoPOSExiteTrocaEquipamento(chamado?.codDefeitoPOS)">
                <ion-option 
                  *ngFor="let equipamento of equipamentosPOS"
                  [value]="equipamento">
                  {{ equipamento?.nomeEquip }}
                </ion-option>
              </ion-select>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Número da Série Retirada</ion-label>

              <ion-input 
                type="text" 
                placeholder="Número da Série Retirada" 
                name="numSerieRetirada"
                maxlength="50"
                [ngModel]="chamado?.rats[0]?.numSerieRetirada"
                [required]="chamado?.tipoIntervencao?.codTipoIntervencao == 3
                || verificarDefeitoPOSExiteTrocaEquipamento(chamado?.codDefeitoPOS)">
              </ion-input>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Equipamento Instalado</ion-label>

              <ion-select 
                placeholder="Selecione o Equipamento Instalado" 
                name="equipamentoInstalado"
                [ngModel]="chamado?.rats[0]?.equipamentoInstalado"
                [compareWith]="compararEquipamentosPOS"
                [required]="chamado?.tipoIntervencao?.codTipoIntervencao == 3">
                <ion-option 
                  *ngFor="let equipamento of equipamentosPOS"
                  [value]="equipamento">
                  {{ equipamento?.nomeEquip }}
                </ion-option>
              </ion-select>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Número da Série Instalada</ion-label>
              <ion-input 
                type="text" 
                placeholder="Número da Série Instalada" 
                name="numSerieInstalada"
                maxlength="50"
                [ngModel]="chamado?.rats[0]?.numSerieInstalada"
                [required]="chamado?.tipoIntervencao?.codTipoIntervencao == 3">
              </ion-input>
            </ion-item>

            <ion-item col-12 *ngIf="chamado?.cliente?.codCliente == 2">
              <ion-label stacked>Rede</ion-label>
              <ion-input
                type="text"
                name="rede" 
                placeholder="Rede"
                maxlength="50"
                [ngModel]="chamado?.rats[0]?.rede"
                required>
              </ion-input>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Tipo de Comunicacão</ion-label>

              <ion-select 
                placeholder="Selecione o Tipo de Comunicacão"
                name="tipoComunicacao"
                [ngModel]="chamado?.rats[0]?.tipoComunicacao"
                [compareWith]="compararTiposComunicacao">
                <ion-option 
                  *ngFor="let tipoComunicacao of tiposComunicacao"
                  [value]="tipoComunicacao">
                  {{ tipoComunicacao?.nomeTipoComunicacao }}
                </ion-option>
              </ion-select>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Número do Chip Instalado</ion-label>

              <ion-input
                type="text"
                name="nroChipInstalado" 
                placeholder="Número do Chip Instalado"
                [ngModel]="chamado?.rats[0]?.nroChipInstalado">
              </ion-input>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Operadora do Chip Instalado</ion-label>

              <ion-select 
                placeholder="Selecione a Operadora do Chip Instalado" 
                name="operadoraChipInstalado"
                [ngModel]="chamado?.rats[0]?.operadoraChipInstalado"
                [compareWith]="compararOperadoras">
                <ion-option 
                  *ngFor="let operadora of operadoras"
                  [value]="operadora">
                  {{ operadora?.nomeOperadoraTelefonica }}
                </ion-option>
              </ion-select>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Número do Chip Retirado</ion-label>

              <ion-input
                type="text"
                name="nroChipRetirado" 
                placeholder="Número do Chip Retirado" 
                [ngModel]="chamado?.rats[0]?.nroChipRetirado">
              </ion-input>
            </ion-item>

            <ion-item col-12>
              <ion-label stacked>Operadora do Chip Retirado</ion-label>

              <ion-select 
                placeholder="Selecione a Operadora do Chip Retirado" 
                name="operadoraChipRetirado"
                [ngModel]="chamado?.rats[0]?.operadoraChipRetirado"
                [compareWith]="compararOperadoras">
                <ion-option 
                  *ngFor="let operadora of operadoras"
                  [value]="operadora">
                  {{ operadora?.nomeOperadoraTelefonica }}
                </ion-option>
              </ion-select>
            </ion-item>

            <div padding>
              <button
                color="secondary"
                ion-button 
                block
                [disabled]="!fPos.valid">
                Salvar e Prosseguir
              </button>
            </div>
          </ion-list>
        </form>
      </div>

      <ion-list class="list-slide">
        <ion-item class="no-border-bottom" *ngIf="!verificarSeEquipamentoEPOS()">
          <p text-center class="p-msg">Não é necessário preencher</p> 
        </ion-item>
      </ion-list>
    </ion-slide>
    <!-- Informações POS -->

    <!-- Detalhes da RAT -->
    <ion-slide>
      <ion-list class="list-slide">
        <ion-fab right bottom>
          <button 
            ion-fab color="secondary" 
            (click)="telaRatDetalhe()"
            [disabled]="chamado?.rats?.length == 0">
            <ion-icon name="add"></ion-icon
          ></button>
        </ion-fab>
  
        <ion-item
          *ngFor="let ratDetalhe of chamado?.rats[0]?.ratDetalhes; let i = index">
          <ion-label>
            {{ ratDetalhe?.causa?.codECausa }} - {{ ratDetalhe?.causa?.nomeCausa }}
          </ion-label>

          <button
            class="pecas-button"
            ion-button
            clear
            item-end
            (click)="telaRatDetalhePeca(chamado, i)">
            Peças ({{ chamado.rats[0].ratDetalhes[i].pecas.length }})
          </button>

          <button ion-button clear item-end 
            (click)="removerRatDetalhe(ratDetalhe, i)">
            <ion-icon name="trash"></ion-icon>
          </button>
        </ion-item>

        <ion-item *ngIf="chamado?.rats[0]?.ratDetalhes?.length == 0">
          <p text-center class="p-msg">Insira os detalhes da RAT</p>
        </ion-item>
      </ion-list>
    </ion-slide>
    <!-- Detalhes da RAT -->

    <!-- Checkout -->
    <ion-slide>
      <ion-list>
        <div padding *ngIf="!chamado?.checkout?.localizacao?.latitude && !chamado?.checkout?.localizacao?.longitude">
          <button color="secondary" ion-button outline icon-start (click)="efetuarCheckout()" class="btn-checkout">
            <ion-icon name='ios-locate-outline' is-active="false"></ion-icon>
            
            {{ (!chamado?.checkout?.localizacao?.latitude && !chamado?.checkout?.localizacao?.longitude) ? 'Checkout' : 'Checkout Efetuado' }}
          </button>

          <p *ngIf="chamado?.indCercaEletronicaLiberada">
            O checkout pode ser efetuado fora do local de atendimento para esta OS
          </p>
        </div>
      </ion-list>

      <ion-card class="adv-map"
        *ngIf="chamado?.checkout?.localizacao?.latitude && chamado?.checkout?.localizacao?.longitude">

         <ion-item>
          <ion-icon color="subtle" class="adv-map-icon" name="pin" item-start large></ion-icon>

          <div class="adv-map-titles">
            <h2>Checkout Efetuado</h2>
            <p>{{ chamado?.checkout?.dataHoraCadastro }}</p>
          </div>
        </ion-item>
      </ion-card>
    </ion-slide>
    <!-- Checkout -->

    <!-- Conferência -->
    <ion-slide>
      <ion-item-divider 
        class="first-divider text-left"
        color="light">RAT</ion-item-divider>

        <ion-item>
          Número da RAT
          <ion-note item-end>
            {{ chamado?.rats[0]?.numRat }}
          </ion-note>
        </ion-item>

        <ion-item>
          Checkin
          <ion-note item-end>
            {{ chamado?.checkin?.dataHoraCadastro }}
          </ion-note>
        </ion-item>

        <ion-item>
          Checkout
          <ion-note item-end>
            {{ chamado?.checkout?.dataHoraCadastro }}
          </ion-note>
        </ion-item>

        <ion-item>
          Início do Atendimento
          <ion-note item-end>
            {{ chamado?.rats[0]?.dataInicio | date:'dd/MM' }}
            {{ chamado?.rats[0]?.horaInicio }}
          </ion-note>
        </ion-item>

        <ion-item>
          Solução do Atendimento
          <ion-note item-end>
            {{ chamado?.rats[0]?.dataInicio | date:'dd/MM' }}
            {{ chamado?.rats[0]?.horaSolucao }}
          </ion-note>
        </ion-item>

        <ion-item>
          Acompanhante
          <ion-note item-end>
            {{ chamado?.rats[0]?.nomeAcompanhante }}
          </ion-note>
        </ion-item>

        <ion-item-divider 
          color="light"
          class="text-left">Solução </ion-item-divider>

        <ion-item text-wrap>
          <span class="inf-bas">
            {{ chamado?.rats[0]?.obsRAT }}</span>
        </ion-item>

        <div *ngFor="let ratDetalhe of chamado?.rats[0]?.ratDetalhes; let i = index">
          <ion-item-divider 
            color="light"
            class="text-left">
            Detalhe 
            <ion-badge 
              item-end
              class="badge"
              color="light">{{ i + 1 }}/{{ chamado?.rats[0]?.ratDetalhes?.length }}</ion-badge>
          </ion-item-divider>

          <ion-item>
            Tipo da Causa
            <ion-note item-end>
              {{ ratDetalhe?.tipoCausa?.nomeTipoCausa 
                | lowercase | capitalize | ellipsis: 20 }}
            </ion-note>
          </ion-item>

          <ion-item>
            Tipo de Serviço
            <ion-note item-end>
              {{ ratDetalhe?.tipoServico?.nomeTipoServico 
                | lowercase | capitalize | ellipsis: 20 }}
            </ion-note>
          </ion-item>

          <ion-item>
            Causa
            <ion-note item-end>
              {{ ratDetalhe?.causa?.codECausa }}
              - {{ ratDetalhe?.causa?.nomeCausa | lowercase | capitalize | ellipsis: 22 }}
            </ion-note>
          </ion-item>

          <ion-item>
            Defeito
            <ion-note item-end>
              {{ ratDetalhe?.defeito?.codEDefeito }}
              - {{ ratDetalhe?.defeito?.nomeDefeito | lowercase | capitalize | ellipsis: 20 }}
            </ion-note>
          </ion-item>

          <ion-item>
            Ação
            <ion-note item-end>
              {{ ratDetalhe?.acao?.codEAcao }}
              - {{ ratDetalhe?.acao?.nomeAcao | lowercase | capitalize | ellipsis: 20}}
            </ion-note>
          </ion-item>

          <div *ngFor="let peca of ratDetalhe?.pecas; let i = index">
            <ion-item-divider 
              color="light"
              class="text-left">
              Peça 
              <ion-badge 
                item-end
                class="badge"
                color="light">{{ i + 1 }}/{{ ratDetalhe?.pecas?.length }}</ion-badge>
            </ion-item-divider>

            <ion-item>
              Peça
              <ion-note item-end>
                {{ peca?.nomePeca | lowercase | capitalize | ellipsis: 20 }}
              </ion-note>
            </ion-item>

            <ion-item>
              Qtd
              <ion-note item-end>
                {{ peca.qtd }}
              </ion-note>
            </ion-item>
          </div>
        </div>
    </ion-slide>
    <!-- Conferência -->

    <!-- Fechamento -->
    <ion-slide>
      <ion-list>
        <div padding>
          <button 
            color="secondary"
            ion-button 
            block
            (click)="fecharChamado()">
            Fechar o Chamado
          </button>
        </div>
      </ion-list>
    </ion-slide>
    <!-- Fechamento -->
  </ion-slides>
</ion-content>